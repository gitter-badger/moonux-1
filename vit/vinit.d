--[[
  moonux-boot:viinit
  Executes and replaces the normal APIs with the moonux:corelib set of APIs
  
  Made by thecrimulo
  ~ Moonux Project
]]--

print("Loading vinit.old.l")
shell.run("/vit/vinit.old.l")
--error()
print("Loading perm.l")
dofile("/lib/perm.l")
--error()
print("Loading aes.l")
dofile("/lib/aes.l")
--error()
print("Loading api.l")
dofile("/lib/api.l")
--error()
print("Loading bit.l")
dofile("/lib/bit.l")
--error()
print("Loading color.l")
dofile("/lib/color.l")
--error()
print("Loading disk.l")
dofile("/lib/disk.l")
--error()
print("Loading gps.l")
dofile("/lib/gps.l")
--error()
print("Loading help.l")
dofile("/lib/help.l")
--error()
print("Loading http.l")
dofile("/lib/http.l")
--error()
print("Loading key.l")
dofile("/lib/key.l")
--error()
print("Loading math.l")
dofile("/lib/math.l")
--error()
print("Loading os.l")
dofile("/lib/os.l")
--error()
print("Loading shell.l")
shell.run("/lib/shell.l")
--error()
print("Loading string.l")
dofile("/lib/string.l")
--error()
print("Loading io.l")
dofile("/lib/io.l")
--error()
print("Modifying dofile")
_G['dofile'] = function(filename)
  if string.startsWith(filename, "/vit/") then return "# Permission denied" end
  return vinit.old.vdofile(filename)
end
shell.setPath(shell.path()..":/lib")
shell.setPath(shell.path()..":/bin")
